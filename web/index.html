<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>X-iNet Advanced Filter Control</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #1a1a1a; color: #eee; margin: 0; padding: 20px; }
        .dashboard { max-width: 1200px; margin: auto; }
        header { border-left: 5px solid #007bff; padding-left: 15px; margin-bottom: 30px; }
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 30px; }
        .card { background: #2a2a2a; padding: 20px; border-radius: 4px; border: 1px solid #333; }
        .card h4 { margin: 0; color: #888; font-size: 0.8em; text-transform: uppercase; }
        .card div { font-size: 1.8em; font-weight: bold; margin-top: 10px; color: #007bff; }
        table { width: 100%; border-collapse: collapse; background: #2a2a2a; }
        th { text-align: left; padding: 15px; background: #333; color: #007bff; text-transform: uppercase; font-size: 0.8em; }
        td { padding: 12px 15px; border-bottom: 1px solid #333; font-family: monospace; }
        .tag { padding: 3px 8px; border-radius: 3px; font-size: 0.75em; font-weight: bold; text-transform: uppercase; }
        .tag-sex { background: #6610f2; color: white; }
        .tag-ads_tracking { background: #fd7e14; color: white; }
        .tag-unknown { background: #444; color: #aaa; }
    </style>
</head>
<body>
    <div class="dashboard">
        <header>
            <h1>X-iNet Multi-Format Generation</h1>
            <p id="update-time">System-Status: Analyse laeuft...</p>
        </header>

        <div class="grid" id="stats-container">
            </div>

        <table id="main-table">
            <thead>
                <tr>
                    <th>Target Domain</th>
                    <th>Classification</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script>
        async function init() {
            const statusReq = await fetch('output/status.json');
            const stats = await statusReq.json();
            
            document.getElementById('update-time').innerText = "Letzter Abgleich: " + new Date(stats.last_update).toLocaleString();
            
            const statsHtml = `
                <div class="card"><h4>Datenbank</h4><div>${stats.total_domains.toLocaleString()}</div></div>
                <div class="card"><h4>Adult/Sex</h4><div>${stats.categories.sex || 0}</div></div>
                <div class="card"><h4>Ads/Track</h4><div>${stats.categories.ads_tracking || 0}</div></div>
                <div class="card"><h4>Security Boost</h4><div>Aktiv</div></div>
            `;
            document.getElementById('stats-container').innerHTML = statsHtml;

            const dataReq = await fetch('output/xinet_data.json');
            const list = await dataReq.json();
            const tbody = document.querySelector('#main-table tbody');
            
            list.slice(0, 100).forEach(item => {
                const row = `<tr><td>${item.d}</td><td><span class="tag tag-${item.c}">${item.c}</span></td></tr>`;
                tbody.insertAdjacentHTML('beforeend', row);
            });
        }
        init();
    </script>
</body>
</html>